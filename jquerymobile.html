<!DOCTYPE html> 
<html>
<head>
    <meta charset="utf-8">
	<title>Page Title</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
	<style type="text/css">
	    .z-page-data {}
	    .z-header{}
	    .z-footer-btn {}
	    .z-hide {display:none;}
	</style>
</head>

<body>
<!--http://jquerymobile.com/demos/1.1.1/docs/pages/page-dynamic.html-->
	<div id="mainPage" data-role="page">
	
	    <div id="dataHeader-0" class="z-header"  data-role="header" data-position="fixed">
	        <a href="#" data-icon="plus">新哦耶</a><h1>哦耶！</h1><a href="#template-setting" data-icon="gear" >选项</a>
	    </div>
	    
	    <div id="dataHeader-1" class="z-header z-hide"  data-role="header" data-position="fixed">
	        <a href="#" data-icon="plus">新嘎嘎</a><h1>嘎嘎！</h1><a href="#template-setting" data-icon="gear" >选项</a>
	    </div>
	    
	    <div id="dataHeader-2" class="z-header z-hide" data-role="header" data-position="fixed">
	        <a href="#" data-icon="plus">新啊啊</a><h1>啊啊！</h1><a href="#template-setting" data-icon="gear" >选项</a>
	    </div>
	    
	    <div id="dataHeader-3" class="z-header z-hide" data-role="header" data-position="fixed">
	        <a href="#" data-icon="plus">新嗯嗯</a><h1>嗯嗯！</h1><a href="#template-setting" data-icon="gear" >选项</a>
	    </div>
	    
	    <div id="dataHeader-4" class="z-header z-hide" data-role="header" data-position="fixed">
	        <a href="#" data-icon="plus">新哇哇</a><h1>哇哇！</h1><a href="#template-setting" data-icon="gear" >选项</a>
	    </div>

	    <div id="dataContent" data-role="content">
	    </div>

	    <div id="dataFooter" data-role="footer" data-position="fixed">
		    <div data-role="navbar">
                <ul>
                    <li><a id="btn-0">哦耶</a></li>
                    <li><a id="btn-1">嘎嘎</a></li>
                    <li><a id="btn-2">啊啊</a></li>
                    <li><a id="btn-3">嗯嗯</a></li>
                    <li><a id="btn-4">哇哇</a></li>
                </ul>
            </div>
	    </div>
	    
    </div>
    
    <div id="template-view-item" data-role="page">
      <div data-role="header"><a href="#mainPage" data-icon="back">返回</a><h1></h1><a href="#" data-icon="edit" >编辑</a></div>
      <div data-role="content"></div>
    </div>
    
    <div id="template-setting" data-role="page">
      <div data-role="header"><a href="#mainPage" data-icon="back">返回</a><h1>选项</h1><a href="#" data-icon="minus" >安全退出</a></div>
      <div data-role="content">
        <a href="#" data-role="button">嘎嘎</a>
      </div>
    </div>
    
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
	<script type="text/javascript">
	(function(window) {
	    var Tester = window.Tester || {};
	    
	    jQuery.mobile.listview.prototype.options.filterCallback = function( text, searchValue ) {
            return false;
        };
        
        // Listen for any attempts to call changePage().
        $(window.document).bind( "pagebeforechange", function( e, data ) {
	        // We only want to handle changePage() calls where the caller is
	        // asking us to load a page by URL.
	        if ( typeof data.toPage === "string" ) {
		        // We are being asked to load a page by URL, but we only
		        // want to handle URLs that request the data for a specific
		        // category.
		        var u = $.mobile.path.parseUrl( data.toPage ),
			        re = /^#template-view-item/;
		        if ( u.hash.search(re) != -1 ) {
			        // We're being asked to display the items for a specific category.
			        // Call our internal method that builds the content for the category
			        // on the fly based on our in-memory category data structure.
			        Tester.showItem( u, data.options );

			        // Make sure to tell changePage() we've handled this call so it doesn't
			        // have to do anything.
			        e.preventDefault();
		        }
	        }
        });
	    
	    Tester.init = function() {
	        for (var i = 0; i < 5; i++) {
	            var data_array = [];
	            data_array.push('<div id="data-', i, '" class="z-page-data', (0 != i ? " z-hide" : ""), '">');
	            data_array.push('<ul id="dataul-', i, '" style="margin-bottom: 0px;" data-role="listview" data-filter="true" data-filter-placeholder="', 'Search SEQ ', i, '" data-inset="true">');

	            var jMax = 3 + parseInt(10 * Math.random());
	            for (var j = 0; j < jMax; j++) {
	                var value = new Date().getTime() + parseInt(Math.random() * 1000);
	                data_array.push('<li><a href="#template-view-item?value=', value, '" data-transition="flip">SEQ-', value, '</a></li>');
	            }
	            data_array.push('</ul>');
	            data_array.push('<div style="overflow:hidden;">');
	            data_array.push('<a style="float:left;margin-left:0px;" href="#" data-role="button" data-icon="arrow-l" data-iconpos="left" data-inline="true">上一页</a>');
                data_array.push('<a style="float:right;margin-right:0px;" href="#" data-role="button" data-icon="arrow-r" data-iconpos="right" data-inline="true">下一页</a>');
                data_array.push('</div>');
	            data_array.push('</div>');
	            jQuery("#dataContent").append(data_array.join(''));
	            
	            $( "#dataul-" + i).on( "listviewbeforefilter", function ( e, data ) {
				    var $ul = $( this ),
					    $input = $( data.input ),
					    value = $input.val(),
					    html = "";
				    $ul.html( "" );
				    
				    /*$ul.html( "<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>" );
					    $ul.listview( "refresh" );*/
					    
					    var sub_array = [];
					    jMax = 3 + parseInt(10 * Math.random());
	                    for (var j = 0; j < jMax; j++) {
	                        var value = new Date().getTime() + parseInt(Math.random() * 1000);
	                        sub_array.push('<li><a href="#template-view-item?value=', value, '" data-transition="flip">SEQ-', value, '</a></li>');
	                    }
	                    $ul.html(sub_array.join(''));
	                    $ul.listview("refresh");
	                    $ul.trigger("updatelayout");
			    });
	        
	            var btn = jQuery("#btn-" + i);
	            btn.addClass('z-footer-btn');
	            var ACTIVE_CLASS = 'ui-btn-active ui-state-persist';
	            if (0 == i) {
	                btn.addClass(ACTIVE_CLASS);
	            }
	            btn.click(function() {
	                var me = jQuery(this);
	                var seq = me.attr("id").substring(4);
	                jQuery("#dataContent .z-page-data").addClass('z-hide');
	                jQuery("#data-" + seq).removeClass('z-hide');
	                
	                jQuery(".z-header").addClass('z-hide');
	                jQuery("#dataHeader-" + seq).removeClass('z-hide');
	            });
	        }
	    };
	    
	    Tester.showItem = function(urlObj, options) {
	        var value = urlObj.hash.replace( /.*value=/, "" ),

		    // The pages we use to display our content are already in
		    // the DOM. The id of the page we are going to write our
		    // content into is specified in the hash before the '?'.
		    pageSelector = urlObj.hash.replace( /\?.*$/, "" );

	        if ( value ) {
	        
		            // Get the page we are going to dump our content into.
		            var $page = $( pageSelector ),

			        // Get the header for the page.
			        $header = $page.children( ":jqmData(role=header)" ),

			        // Get the content area element for the page.
			        $content = $page.children( ":jqmData(role=content)" );

		            // Find the h1 element in our header and inject the name of
		            // the category into it.
		            $header.find('h1').html('查看' + value);

		            // Inject the category items markup into the content element.
		            $content.html( '啊啊啊啊' + value );

		            // Pages are lazily enhanced. We call page() on the page
		            // element to make sure it is always enhanced before we
		            // attempt to enhance the listview markup we just injected.
		            // Subsequent calls to page() are ignored since a page/widget
		            // can only be enhanced once.
		            $page.page();

		            // Enhance the listview we just injected.
		            //$content.find( ":jqmData(role=listview)" ).listview();

		            // We don't want the data-url of the page we just modified
		            // to be the url that shows up in the browser's location field,
		            // so set the dataUrl option to the URL for the category
		            // we just loaded.
		            options.dataUrl = urlObj.href;

		            // Now call changePage() and tell it to switch to
		            // the page we just modified.
		            $.mobile.changePage( $page, options );
	        }
	    };
	    
	    window.Tester = Tester;
	    Tester.init();
	})(window);
	</script>
</body>
</html>
